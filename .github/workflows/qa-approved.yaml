name: "QA Approved"

on:
  # # pull_request:
  # #   types: [labeled, unlabeled]
  # pull_request_review_comment:
  #   types: [created, deleted]
  workflow_run:
    workflows: [QA Approved Label]
    types: [completed]

jobs:
  check-label:
    name: QA Approval
    runs-on: ubuntu-latest
    env:
      GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
    if: ${{ github.event.workflow_run.conclusion == 'success' }}
    steps:
      - run: echo "This is success trigger"
        env:
          GITHUB_EVENT: ${{ toJSON(github.event) }}

    # steps:
    #   - run: |
    #       ERROR_MESSAGE="QA Approved label not found"
    #       ${HAS_QA_LABEL} && (echo "You have the QA approved label" && exit 0) || (echo "::error::${ERROR_MESSAGE}" && exit 1)
    #     shell: bash
    #     env:
    #       GITHUB_LABELS: ${{ toJSON(github.event.pull_request.labels.*.name) }}
    #       HAS_QA_LABEL: ${{ contains(toJSON(github.event.pull_request.labels.*.name), 'qa-approved') }}
    #       GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
    #       GITHUB_CONTEXT: ${{ toJSON(github.event )}}
